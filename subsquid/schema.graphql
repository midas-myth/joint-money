type Group @entity {
  id: ID!
  admin: String!
  tokenAmounts: [TokenAmount!]!
  members: [Membership!]! @derivedFrom(field: "group")
  invites: [Invite!]! @derivedFrom(field: "group")
}

enum Role {
  VIEWER
  MANAGER
  ADMIN
}

type Membership @entity @index(fields: ["group", "address"], unique: true) {
  id: ID!
  role: Role!
  group: Group!
  address: String! @index
  dailyAllowance: BigInt!
  dailySpent: BigInt!
  lastSpentAt: BigInt!
}

type TokenAmount {
  tokenAddress: ID!
  amount: BigInt!
}

type Invite @entity @index(fields: ["invitee", "group"], unique: true) {
  id: ID!
  group: Group!
  invitee: String! @index
  role: Role!
}
